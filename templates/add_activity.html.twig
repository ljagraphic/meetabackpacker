{% extends "layoutactivity.html.twig" %}



{% block body %}

    <section class="clearfix pageTitleSection bg-image" style="background-image: url({{ asset('img/background/activityback.png') }}" alt="Origin country"  >
        <div class="container">
            <div class="row">
                <div class="col-xs-12"></div>
            </div>        	
            <br>
        </div>
        <br>	
    </section>

    <div class="pageTitle">
        <h2>Add an Activity</h2>
    </div>




    {% use "bootstrap_4_layout.html.twig" %}

    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>






    <div id="map"></div>

    {{form_start (form) }}    {# debut du formulaire #}
    {{form_widget (form) }}   {# contenu du formulaire #} 
    {{form_end (form) }}      {# fin du formulaire #}

    <script>
        var googleReady = false;
        var stackGoogle = [];
        var geocoder;
        var map;
        var bar = 'img/marker/markermap/barpub.png';
        var restaurant = 'img/marker/markermap/foodrestaurant.png';
        var culture = 'img/marker/markermap/culture.png';
        var outdooractivity = 'img/marker/markermap/outdooractivity.png';
        var hotel = 'img/marker/markermap/hostelhotel.png';
        var curiosity = 'img/marker/markermap/curiosity.png';
        var shopping = 'img/marker/markermap/shopping.png';
        var ecotourism = 'img/marker/markermap/ecotourism.png';
        googlePush(function () {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(48.872416, 2.291373);
        var mapOptions = {
        zoom: 2,
                center: latlng
        }
        map = new google.maps.Map(document.getElementById('map'), mapOptions);
        document.getElementById('form_activity_locate').addEventListener('click', function (e) {
        e.preventDefault();
        codeAddress();
        map.setZoom(16);
        });
        map = new google.maps.Map(document.getElementById('map'), mapOptions);
        
        //Style of map

        function initMap() {
        googleReady = true;
        for (callback of stackGoogle) {
        callback();
        }
        delete(stackGoogle);
        var styledMapType = new google.maps.StyledMapType(
        [
        {elementType: 'geometry', stylers: [{color: '#ebe3cd'}]},
        {elementType: 'labels.text.fill', stylers: [{color: '#523735'}]},
        {elementType: 'labels.text.stroke', stylers: [{color: '#f5f1e6'}]},
        {
        featureType: 'administrative',
                elementType: 'geometry.stroke',
                stylers: [{color: '#c9b2a6'}]
        },
        {
        featureType: 'administrative.land_parcel',
                elementType: 'geometry.stroke',
                stylers: [{color: '#dcd2be'}]
        },
        {
        featureType: 'administrative.land_parcel',
                elementType: 'labels.text.fill',
                stylers: [{color: '#ae9e90'}]
        },
        {
        featureType: 'landscape.natural',
                elementType: 'geometry',
                stylers: [{color: '#E6E9EE'}]
        },
        {
        featureType: 'poi',
                elementType: 'geometry',
                stylers: [{color: '#E6E9EE'}]
        },
        {
        featureType: 'poi',
                elementType: 'labels.text.fill',
                stylers: [{color: '#93817c'}]
        },
        {
        featureType: 'poi.park',
                elementType: 'geometry.fill',
                stylers: [{color: '#90DFAA'}]
        },
        {
        featureType: 'poi.park',
                elementType: 'labels.text.fill',
                stylers: [{color: '#447530'}]
        },
        {
        featureType: 'road',
                elementType: 'geometry',
                stylers: [{color: '#f5f1e6'}]
        },
        {
        featureType: 'road.arterial',
                elementType: 'geometry',
                stylers: [{color: '#fdfcf8'}]
        },
        {
        featureType: 'road.highway',
                elementType: 'geometry',
                stylers: [{color: '#818183'}]
        },
        {
        featureType: 'poi.business',
                elementType: 'labels',
                stylers: [{visibility: 'off'}]
        },
        {
        featureType: 'road.highway',
                elementType: 'geometry.stroke',
                stylers: [{color: '#E6E9EE'}]
        },
        {
        featureType: 'road.highway.controlled_access',
                elementType: 'geometry',
                stylers: [{color: '#ced5ea'}]
        },
        {
        featureType: 'road.highway.controlled_access',
                elementType: 'geometry.stroke',
                stylers: [{color: '#db8555'}]
        },
        {
        featureType: 'road.local',
                elementType: 'labels.text.fill',
                stylers: [{color: '#806b63'}]
        },
        {
        featureType: 'transit.line',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
        },
        {
        featureType: 'transit.line',
                elementType: 'labels.text.fill',
                stylers: [{color: '#8f7d77'}]
        },
        {
        featureType: 'transit.line',
                elementType: 'labels.text.stroke',
                stylers: [{color: '#ebe3cd'}]
        },
        {
        featureType: 'transit.station',
                elementType: 'geometry',
                stylers: [{color: '#dfd2ae'}]
        },
        {
        featureType: 'water',
                elementType: 'geometry.fill',
                stylers: [{color: '#13B5C7'}]
        },
        {
        featureType: 'water',
                elementType: 'labels.text.fill',
                stylers: [{color: '#92998d'}]
        }
        ],
        {name: 'Styled Map'});
        // Create a map object, and include the MapTypeId to add
        // to the map type control.






        //Associate the styled map with the MapTypeId and set it to display.
        map.mapTypes.set('styled_map', styledMapType);
        map.setMapTypeId('styled_map');
        }






        {% for marker in markers %}  
        var title = "{{marker.title}}";

        var picture = '<img src="uploads/picture/{{marker.pictures}}">'

        var description = "{{marker.description}}";
        var category = "{{marker.category}}";
        var prices = "{{marker.prices}}";
        var tips = "{{marker.tips}}";
        var address = "{{marker.address}}";

        var contentString = "<h1>"+ title + "</h1>" +"<br>"+"Description : "  + description 
                            +"<br> Category : " + category + "<br>  Price :" + prices +"<br> Tips : " 
                            + tips +"<br> Address : " + address + "<br>" + picture;
        
        
        
        
        
 
        

        var contentString = '<div id="iw-container" style="width=100%;color:#fff;font-weight:bold; background-image: url(uploads/picture/{{marker.pictures }});">'

                + '<div class="iw-content" style="font-size:16px;">'
                + '<i class="fas fa-map-signs"></i>'
                + title + '<div>'
                + "Description : " + description
                + "<br> Category : " + category
                + "<br>  Price :" + prices + "<br> Tips : "
                + tips + "<br> Address : "
                + '<i class="fas fa-map-marker"></i>'
                + address
                + '<br>'
                + '<i class="fa fa-star" style="color:#FFB400;" aria-hidden="true"></i>'
                + '<i class="fa fa-star" style="color:#FFB400;" aria-hidden="true"></i>'
                + '<i class="fa fa-star" style="color:#FFB400;" aria-hidden="true"></i>'
                + '<i class="fa fa-star" style="color:#FFB400;" aria-hidden="true"></i>'
                + '<i class="fa fa-star" style="color:#FFB400;" aria-hidden="true"></i>'
                + '</div>';

        var marker = new google.maps.Marker({
        icon:{{marker.category}},
                position: {
                lat:{{marker.latitude}},
                        lng:{{marker.longitude}}
                },
                map: map,
                info: new google.maps.InfoWindow({content: contentString})
        });
        google.maps.event.addListener(marker, 'click', (function() {
        this.info.open(map, this);
        }));
        {% endfor %}


            });
            function codeAddress() {
            var address = document.getElementById('form_activity_address').value;
            geocoder.geocode({'address': address}, function (results, status) {
            if (status == 'OK') {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
            map: map,
                    position: results[0].geometry.location,
            });
            document.getElementById('form_activity_longitude').value = results[0].geometry.location.lng();
            document.getElementById('form_activity_latitude').value = results[0].geometry.location.lat();
            } else {
            alert('Geocode was not successful for the following reason: ' + status);
            }
            });
            }





    </script>




{% endblock %}



